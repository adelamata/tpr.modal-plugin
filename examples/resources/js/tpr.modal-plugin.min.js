(function(f,c,h){TPRMODAL=function(a){this.defaults={closable:!0,styleclass:"tpr-modalbox-grey",backlayer:{state:!0},closeoutclick:!0,moreinfo:{state:!1,message:"",buttontext:"More info"},buttons:{accept:{state:!0,text:"Accept","class":"default",click:function(){console.log("accept")}},cancel:{state:!0,text:"Cancel","class":"default",click:function(){console.log("cancel")}},close:{state:!0,text:"Close","class":"default-close",click:function(){this.$modal.$modalbackground.hide()}}}};this.$modal={$modalbox:c("<div></div>"),
$modalbackground:c('<div class="tpr-modal-background"></div>'),$modaltopbar:c('<div class="tpr-modal-topbar"></div>'),$modalcontent:c('<div class="tpr-modal-content"></div>'),$modalbotbar:c('<div class="tpr-modal-botbar"></div>'),$modalmorebox:c('<div class="tpr-modal-morebox"></div>'),$modalmorelbtn:c('<a href="#" class="tpr-modal-morebutton"></a>'),$closebutton:c('<a href="#" class="tpr-modal-close" ></a>'),$modaltitle:c("<p></p>"),$modalmessage:c("<p></p>")};this.options={};c.extend(!0,this.options,
this.defaults,a);this.title=a&&a.title||"Default title";this.message=a&&a.message||"Default message";this.messageExplain=a&&a.messageExplain||"Default message explain";this.constructor()};TPRMODAL.prototype={_buildButtons:function(){var a=this;a.$modal.$modalbotbar.empty();c.each(a.options.buttons,function(b,d){if(!0===d.state){var e=c('<a href="#" class="tpr-modal-button '+d["class"]+'">'+d.text+"</a>");a._attachEvent(e,"click",function(){d.click.call(a)});a.$modal.$modalbotbar.append(e)}})},_buildModal:function(){var a=
this;a.$modal.$modalbox.addClass(a.options.styleclass);a.$modal.$modaltopbar.append(a.$modal.$modaltitle.text(a.title)).append(a.$modal.$closebutton);a.$modal.$modalcontent.append(a.$modal.$modalmessage.text(a.message));a.$modal.$modalmorelbtn.text(a.options.moreinfo.buttontext);a.$modal.$modalmorebox.append(a.options.moreinfo.message);a.$modal.$modalcontent.append(a.$modal.$modalmorelbtn);a.$modal.$modalcontent.append(a.$modal.$modalmorebox);!0===a.options.moreinfo.state&&(a.$modal.$modalmorelbtn.css({display:"inline-block"}),
a._attachEvent(a.$modal.$modalmorelbtn,"click",function(){a.$modal.$modalmorebox.slideToggle()}));a.$modal.$modalbox.append(a.$modal.$modaltopbar);a.$modal.$modalbox.append(a.$modal.$modalcontent);a.$modal.$modalbox.append(a.$modal.$modalbotbar);a.options.backlayer?(a.$modal.$modalbackground.appendTo(c("body")),a.$modal.$modalbox.appendTo(a.$modal.$modalbackground),a.options.closeoutclick&&a._attachEvent(a.$modal.$modalbackground,"click",function(){a.hide()})):a.$modal.$modalbox.appendTo(c("body"));
a.options.closable||a.setClosable(!1);var b=f.innerWidth,d=f.innerHeight,e=Math.floor(a.$modal.$modalbox.innerWidth()/100*b),g=Math.floor(a.$modal.$modalbox.innerHeight()/100*d)+400;a.$modal.$modalbox.css({left:b/2-e/2+"px",top:d/2-g/2+"px"});a._attachEvent(a.$modal.$modalbox,"click",function(){return!1})},_attachEvent:function(a,b,c){var e=this;a&&b&&c&&(a.off(b),a.on(b,function(a){a.stopPropagation();c.call(e)}))},setTitle:function(a){this.$modal.$modaltitle.text(a)},setMessage:function(a){this.$modal.$modalmessage.text(a)},
setMessageExplain:function(a){this.$modal.$modalmorebox.text(a)},setMoreinfoState:function(a){var b=this;a?(b.$modal.$modalmorelbtn.css({display:"inline-block"}),b._attachEvent(b.$modal.$modalmorelbtn,"click",function(){b.$modal.$modalmorebox.slideToggle()})):b.$modal.$modalmorelbtn.hide()},setMoreinfoButtonText:function(a){a&&this.$modal.$modalmorelbtn.text(a)},setStyle:function(a){var b=this.$modal.$modalbox.attr("class");this.$modal.$modalbox.addClass(a).removeClass(b)},setClosable:function(a){var b=
this;!0===a?(b.$modal.$closebutton.show(),b._attachEvent(b.$modal.$modalbackground,"click",function(){b.$modal.$modalbackground.hide()})):(b.$modal.$closebutton.hide(),b.$modal.$modalbackground.off("click"))},setDefaultButtonsHide:function(){c.each(this.options.buttons,function(a,b){b.state=!1})},show:function(){this.$modal.$modalbackground.show()},hide:function(){this.$modal.$modalbackground.hide();this.$modal.$modalmorebox.hide()},setButtons:function(a){c.extend(!0,this.options.buttons,a);this._buildButtons()},
constructor:function(){var a=this;a._buildModal();a._buildButtons();a._attachEvent(a.$modal.$closebutton,"click",function(){a.hide()})}}})(window,jQuery);