!function(o,t,a){TPRMODAL=function(o){this.defaults={closable:!0,styleclass:"tpr-modalbox-grey",backlayer:{state:!0},closeoutclick:!0,moreinfo:{state:!1,message:"",buttontext:"More info"},buttons:{accept:{state:!0,text:"Accept","class":"default"},cancel:{state:!0,text:"Cancel","class":"default"},close:{state:!0,text:"Close","class":"default-close"}}},this.$modal={$modalbox:t("<div></div>"),$modalbackground:t('<div class="tpr-modal-background"></div>'),$modaltopbar:t('<div class="tpr-modal-topbar"></div>'),$modalcontent:t('<div class="tpr-modal-content"></div>'),$modalbotbar:t('<div class="tpr-modal-botbar"></div>'),$modalmorebox:t('<div class="tpr-modal-morebox"></div>'),$modalmorelbtn:t('<a href="#" class="tpr-modal-morebutton"></a>'),$closebutton:t('<a href="#" class="tpr-modal-close" ></a>'),$modaltitle:t("<p></p>"),$modalmessage:t("<p></p>")},this.options={},t.extend(!0,this.options,this.defaults,o),this.$el=this.$modal.$modalbox,this.title=o&&o.title||"Default title",this.message=o&&o.message||"Default message",this.messageExplain=o&&o.messageExplain||"Default message explain",this.constructor()},TPRMODAL.prototype={_buildButtons:function(){var o=this;o.$modal.$modalbotbar.empty(),t.each(o.options.buttons,function(a,l){if(l.state===!0){var e=t('<a href="#" class="tpr-modal-button '+l["class"]+'">'+l.text+"</a>");o.$modal.$modalbotbar.append(e),o._attachEvent(e,"click",a)}})},_attachEvent:function(o,a,l){var e=this;o&&a&&l&&(t.isFunction(l)?(o.off(a),o.on(a,function(o){o.stopPropagation(),o.preventDefault(),l()})):(o.off(a),o.on(a,function(t){t.stopPropagation(),t.preventDefault(),e.$modal.$modalbox.trigger(l,[e,o])})))},_buildModal:function(){var a=this;a.$modal.$modalbox.addClass(a.options.styleclass),a.$modal.$modaltopbar.append(a.$modal.$modaltitle.text(a.title)).append(a.$modal.$closebutton),a.$modal.$modalcontent.append(a.$modal.$modalmessage.text(a.message)),a.$modal.$modalmorelbtn.text(a.options.moreinfo.buttontext),a.$modal.$modalmorebox.append(a.options.moreinfo.message),a.$modal.$modalcontent.append(a.$modal.$modalmorelbtn),a.$modal.$modalcontent.append(a.$modal.$modalmorebox),a.options.moreinfo.state===!0&&(a.$modal.$modalmorelbtn.css({display:"inline-block"}),a._attachEvent(a.$modal.$modalmorelbtn,"click",function(){a.$modal.$modalmorebox.slideToggle()})),a.$modal.$modalbox.append(a.$modal.$modaltopbar),a.$modal.$modalbox.append(a.$modal.$modalcontent),a.$modal.$modalbox.append(a.$modal.$modalbotbar),a.options.backlayer?(a.$modal.$modalbackground.appendTo(t("body")),a.$modal.$modalbox.appendTo(a.$modal.$modalbackground),a.options.closeoutclick&&a._attachEvent(a.$modal.$modalbackground,"click",function(){a.hide()})):a.$modal.$modalbox.appendTo(t("body")),a.options.closable||a.setClosable(!1);var l=o.innerWidth,e=o.innerHeight,d=Math.floor(a.$modal.$modalbox.innerWidth()/100*l),n=Math.floor(a.$modal.$modalbox.innerHeight()/100*e)+400,s=l/2-d/2,m=e/2-n/2;a.$modal.$modalbox.css({left:s+"px",top:m+"px"}),a._attachEvent(a.$modal.$modalbox,"click",function(){return!1}),a.$el=a.$modal.$modalmorebox},on:function(o,t){var a=this;a.$modal.$modalbox.off(o),a.$modal.$modalbox.on(o,t)},setTitle:function(o){var t=this;t.$modal.$modaltitle.text(o)},setMessage:function(o){var t=this;t.$modal.$modalmessage.text(o)},setMessageExplain:function(o){var t=this;t.$modal.$modalmorebox.text(o)},setMoreinfoState:function(o){var t=this;o?(t.$modal.$modalmorelbtn.css({display:"inline-block"}),t._attachEvent(t.$modal.$modalmorelbtn,"click",function(){t.$modal.$modalmorebox.slideToggle()})):t.$modal.$modalmorelbtn.hide()},setMoreinfoButtonText:function(o){var t=this;o&&t.$modal.$modalmorelbtn.text(o)},setStyle:function(o){var t=this,a=t.$modal.$modalbox.attr("class");t.$modal.$modalbox.addClass(o).removeClass(a)},setClosable:function(o){var t=this;o===!0?(t.$modal.$closebutton.show(),t._attachEvent(t.$modal.$modalbackground,"click",function(){t.$modal.$modalbackground.hide()})):(t.$modal.$closebutton.hide(),t.$modal.$modalbackground.off("click"))},setDefaultButtonsHide:function(){var o=this;t.each(o.options.buttons,function(o,t){t.state=!1})},show:function(){var o=this;o.$modal.$modalbackground.show()},hide:function(){var o=this;o.$modal.$modalbackground.hide(),o.$modal.$modalmorebox.hide()},setButtons:function(o){var a=this;t.extend(!0,a.options.buttons,o),a._buildButtons()},constructor:function(){var o=this;o._buildModal(),o._buildButtons(),o._attachEvent(o.$modal.$closebutton,"click",function(){o.hide()})}}}(window,jQuery);