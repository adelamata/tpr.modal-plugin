!function(o,t,a){TPRMODAL=function(o){this.defaults={closable:!0,styleclass:"tpr-modalbox-grey",backlayer:!0,closeoutclick:!0,moreinfo:{state:!1,message:"",buttontext:"More info"},buttons:{accept:{state:!0,text:"Accept",class:"default"},cancel:{state:!0,text:"Cancel",class:"default"},close:{state:!0,text:"Close",class:"default-close"}}},this.$modal={$modalbox:this._createElement("<div></div>"),$modalbackground:this._createElement('<div class="tpr-modal-background"></div>'),$modaltopbar:this._createElement('<div class="tpr-modal-topbar"></div>'),$modalcontent:this._createElement('<div class="tpr-modal-content"></div>'),$modalbotbar:this._createElement('<div class="tpr-modal-botbar"></div>'),$modalmorebox:this._createElement('<div class="tpr-modal-morebox"></div>'),$modalmorelbtn:this._createElement('<a href="#" class="tpr-modal-morebutton"></a>'),$closebutton:this._createElement('<a href="#" class="tpr-modal-close" ></a>'),$modaltitle:this._createElement("<p></p>"),$modalmessage:this._createElement("<p></p>")},this.options={},$.extend(!0,this.options,this.defaults,o),this.$el=this.$modal.$modalbox,this.$body=t("body"),this.title=o&&o.title||"Default title",this.message=o&&o.message||"Default message",this.messageExplain=o&&o.messageExplain||"Default message explain",this.constructor()},TPRMODAL.prototype={_insertChilds:function(o,t){if(o&&t)if(t.length)for(var a=0;a<t.length;a++)o.append(t[a]);else o.append(t)},_createElement:function(o){if(o)return t(o)},_buildButtons:function(){var o=this;o.$modal.$modalbotbar.empty(),$.each(o.options.buttons,function(t,a){if(!1!==a){var e=o._createElement('<a href="#" class="tpr-modal-button '+a.class+'">'+a.text+"</a>");o._insertChilds(o.$modal.$modalbotbar,e),o._attachEvent(e,"click",t)}})},_attachEvent:function(o,t,a){var e=this;o&&t&&a&&($.isFunction(a)?(o.off(t),o.on(t,function(o){o.stopPropagation(),o.preventDefault(),a()})):(o.off(t),o.on(t,function(t){t.stopPropagation(),t.preventDefault(),e.$modal.$modalbox.trigger(a,[e,o])})))},_buildModal:function(){var t=this;t.$modal.$modalbox.addClass(t.options.styleclass),t._insertChilds(t.$modal.$modaltopbar,[t.$modal.$modaltitle.text(t.title),t.$modal.$closebutton]),t._insertChilds(t.$modal.$modalcontent,t.$modal.$modalmessage.text(t.message)),t.$modal.$modalmorelbtn.text(t.options.moreinfo.buttontext),t._insertChilds(t.$modal.$modalmorebox,t.options.moreinfo.message),t._insertChilds(t.$modal.$modalcontent,[t.$modal.$modalmorelbtn,t.$modal.$modalmorebox]),!0===t.options.moreinfo.state&&(t.$modal.$modalmorelbtn.css({display:"inline-block"}),t._attachEvent(t.$modal.$modalmorelbtn,"click",function(){t.$modal.$modalmorebox.slideToggle()})),t._insertChilds(t.$modal.$modalbox,[t.$modal.$modaltopbar,t.$modal.$modalcontent,t.$modal.$modalbotbar]),!0===t.options.backlayer?(t.$modal.$modalbackground.appendTo(t.$body),t.$modal.$modalbox.appendTo(t.$modal.$modalbackground),t.options.closeoutclick&&t._attachEvent(t.$modal.$modalbackground,"click",function(){t.hide()})):t.$modal.$modalbox.appendTo(t.$body),t.options.closable||t.setClosable(!1);var a=o.innerWidth,e=o.innerHeight,l=a/2-Math.floor(t.$modal.$modalbox.innerWidth()/100*a)/2,n=e/2-(Math.floor(t.$modal.$modalbox.innerHeight()/100*e)+400)/2;t.$modal.$modalbox.css({left:l+"px",top:n+"px"}),t._attachEvent(t.$modal.$modalbox,"click",function(){return!1}),t.$el=t.$modal.$modalmorebox},on:function(o,t){var a=this;a.$modal.$modalbox.off(o),a.$modal.$modalbox.on(o,t)},setTitle:function(o){this.$modal.$modaltitle.text(o)},setMessage:function(o){this.$modal.$modalmessage.text(o)},setMessageExplain:function(o){this.$modal.$modalmorebox.text(o)},setMoreinfoState:function(o){var t=this;o?(t.$modal.$modalmorelbtn.css({display:"inline-block"}),t._attachEvent(t.$modal.$modalmorelbtn,"click",function(){t.$modal.$modalmorebox.slideToggle()})):t.$modal.$modalmorelbtn.hide()},setMoreinfoButtonText:function(o){var t=this;o&&t.$modal.$modalmorelbtn.text(o)},setStyle:function(o){var t=this,a=t.$modal.$modalbox.attr("class");t.$modal.$modalbox.addClass(o).removeClass(a)},setClosable:function(o){var t=this;!0===o?(t.$modal.$closebutton.show(),t._attachEvent(t.$modal.$modalbackground,"click",function(){t.$modal.$modalbackground.hide()})):(t.$modal.$closebutton.hide(),t.$modal.$modalbackground.off("click"))},setDefaultButtonsHide:function(){var o=this;$.each(o.options.buttons,function(o,t){t.state=!1})},show:function(){this.$modal.$modalbackground.show()},hide:function(){var o=this;o.$modal.$modalbackground.hide(),o.$modal.$modalmorebox.hide()},setButtons:function(o){var t=this;$.extend(!0,t.options.buttons,o),t._buildButtons()},constructor:function(){var o=this;o._buildModal(),o._buildButtons(),o._attachEvent(o.$modal.$closebutton,"click",function(){o.hide()})}}}(window,$);